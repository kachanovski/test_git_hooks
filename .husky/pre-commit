#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo -e "–Ω—É –ø–æ–≥–Ω–∞–ª–∏..."

BRANCH=`git rev-parse --abbrev-ref HEAD`
PROTECTED_BRANCHES="^(main|dev)"

if [[ "$BRANCH" =~ $PROTECTED_BRANCHES ]]
then
  echo -e "\nüö´ –í–µ—Ç–∫–∞ - $BRANCH, –∑–∞—â–∏—â–µ–Ω–∞, —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–≤–ª–µ–Ω–∏–µ –∏–∑ —Ç–µ–∫—É—â–µ–π –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ü–† ."
  exit 1
fi

yarn pretty-quick --staged && yarn tsc && yarn format:fix && yarn lint

echo -e "–í–∂—É—Ö-–≤–∂—É—Ö –∏ –∑–∞–∫–æ–º–∏—Ç–∏–ª–∏—Å—å..."

exit 0
